<script type="text/javascript">window.onload=function(){handler = Gmaps.build('Google');
handler.buildMap({ provider: { center: new google.maps.LatLng(40.775,-73.985), zoom: 12 }, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers([
    {
      "lat": 0,
      "lng": 0,
      "picture": {
        "url": "https://addons.cdn.mozilla.net/img/uploads/addon_icons/13/13028-64.png",
        "width":  36,
        "height": 36
      },
      "infowindow": "hello!"
    }
  ]);
  // handler.bounds.extendWith(markers);
  // handler.fitMapToBounds();
});
};
</script>

<%= form_tag apartments_path, :method => :post do %>
  <p>
    <%= text_field_tag :search,  params[:search], placeholder: 'Apartment address...' %>
    <%= submit_tag "Find Zoned School", :name => nil %>
<% end %>

<% @apartments.each do |apartment| %>
	<%= @latlng_array[0] %>
	<%= @latlng_array[1] %>
<% end %>

<div style='width: 1000px;'>
  <div id="map" style='width: 1000px; height: 800px;'></div>
</div>

<table>
	<thead>
		<th>DBN</th>
		<th>District</th>
		<th>School</th>
		<th>Level</th>
		<th>Overall Score</th>
		<th>Overall Grade</th>
		<th>Progress Score</th>
		<th>Progress Grade</th>
		<th>Performance Score</th>
		<th>Performance Grade</th>
		<th>Environement Score</th>
		<th>Environment Grade</th>
		<th>Shape Length</th>
		<th>Shape Area</th>
	</thead>
	<tbody>
		<% @school_data.each do |t| %>
			<tr>
				<td><%= t.dbn_num %></td>
				<td><%= t.district_num %></td>
				<td><%= t.school_name %></td>
				<td><%= t.school_level %></td>
				<td><%= t.overall_score %></td>
				<td><%= t.overall_grade %></td>
				<td><%= t.progress_score %></td>
				<td><%= t.progress_grade %></td>
				<td><%= t.performance_score %></td>
				<td><%= t.performance_grade %></td>
				<td><%= t.environment_score %></td>
				<td><%= t.environment_grade %></td>
				<td><%= t.shape_length %></td>
				<td><%= t.shape_area %></td>
			</tr>
		<% end %>
	<tbody/>
</table>
